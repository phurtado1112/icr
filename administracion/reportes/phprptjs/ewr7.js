/**
 * JavaScript for PHP Report Maker 7
 * (C)2007-2013 e.World Technology Ltd.
 */function ewr_On(e,t,n){var r=jQuery,i;r.isString(e)?i=/^\w+(\[\])?$/.test(e)?r("[id='"+e+"'],[name='"+e+"']"):r(e):i=r(e),i.on(t,n)}function ewr_Batch(e,t,n,r){var i=jQuery,s=[],o=r?n:null;e=e&&(e.tagName||e.item)?e:i(e).get();if(!e||!t)return!1;if(e.tagName||e.length===undefined)return t.call(o,e,n);for(var u=0;u<e.length;++u)s[s.length]=t.call(o||e[u],e[u],n);return s}function ewr_Select(e,t,n){var r=jQuery,i=r(t),s=i.find(e).get();return r.isFunction(n)?s=ewr_Batch(s,n):r.isString(n)&&(s=ewr_Batch(s,new Function(n))),s}function ewr_Matches(e,t,n){var r=jQuery,i=r(t).filter(e).get();return r.isFunction(n)?i=ewr_Batch(i,n):r.isString(n)&&(i=ewr_Batch(i,new Function(n))),i}function ewr_ExportCharts(e,t,n,r){function u(){r&&!/&(amp;)?custom=1/.test(t)?i.post(t,i(r).serialize(),function(e){ewr_ShowMessage(e)}):/export=(word|excel|pdf|email)&(amp;)?custom=1/.test(t)?(/export=email/.test(t)&&(t.replace(/export=email&(amp;)?/i,""),t+="&"+i(r).serialize()),i("iframe.ewExport").remove(),i("<iframe>").attr("src",t).addClass("ewExport hide").appendTo(i("body").css("cursor","wait")),i.later(5e3,null,function(){i("body").css("cursor","default")})):ewr_Redirect(t,r,o)}function l(e){var t=FusionCharts(e);t.dispose()}function c(e){var t=FusionCharts(e),n="cht_"+e.substr(6),r="div_export_"+e.substr(6);s.popover("destroy").popover({html:!0,placement:"bottom",trigger:"manual",template:'<div class="popover"><h3 class="popover-title"></h3><div class="popover-content" style="overflow: auto; padding: 0;"></div><div class="modal-footer"><a href="#" class="btn ewButton">'+ewLanguage.Phrase("CancelBtn")+"</a></div></div>",title:ewLanguage.Phrase("ExportingChart").replace("%c",a+1).replace("%t",ewrExportCharts.length),content:'<div id="'+r+'"></div>',container:i("#ewrExportDialog")}).on("shown",function(){var e=t.clone({renderer:"flash"});e.setChartAttribute("animation","0"),e.render(r),s.data("popover").tip().find(".modal-footer .ewButton").click(function(){ewrExporting=!1,f=!0,e.dispose(),s.popover("destroy")})}).popover("show")}if(ewrExporting)return;n+="_"+(new Date).getTime(),t+=(t.split("?").length>1?"&":"?")+"exportid="+n;var i=jQuery,s=i(e),o=r?"post":"get";s.is(".dropdown-menu a")&&(s=s.closest(".btn-group"));if(ewrExportCharts.length==0||i.ua.ios>0)return u();var a=0,f=!1;FC_Rendered=function(e){var t=FusionCharts(e);t.exportChart({exportFileName:n+"_"+ewrExportCharts[a]})},FC_Exported=function(e){if(f)return;e.statusCode=="1"?(l(e.DOMId),a++,a==ewrExportCharts.length?(s.popover("destroy"),u(),ewrExporting=!1):c(ewrExportCharts[a])):(l(e.DOMId),ewrExporting=!1,s.popover("destroy"),alert(ewLanguage.Phrase("ExportChartError")+e.statusMessage))},ewrExporting=!0,c(ewrExportCharts[a])}function ewr_CreatePopup(e,t){ewrPopups[e]=t}function ewr_ShowPopup(e,t,n,r,i){ewr_StopPropagation(e);var s=jQuery,o=s(this),u=function(){var e=o.data("popover").tip(),n=e.find("form")[0],r=s('<a href="#" class="btn btn-primary btn-small ewPopupBtn">'+ewLanguage.Phrase("PopupOK")+"</a>").click(function(){n&&!ewr_SelectedEntry(n,t)?alert(ewLanguage.Phrase("PopupNoValue")):(n&&n.submit(),o.popover("hide"))});e.find(".modal-footer").append(r).show()},a=function(){var e=o.data("popover").tip(),t=e.find("form")[0],n=s('<a href="#" class="btn btn-small ewPopupBtn">'+ewLanguage.Phrase("PopupCancel")+"</a>").click(function(){o.popover("hide")});e.find(".modal-footer").append(n)};if(!o.data("popover")){o.popover({html:!0,placement:"bottom",trigger:"manual",template:'<div class="popover"><div class="popover-content" style="overflow: auto;"></div><div class="modal-footer hide"></div><div class="ewResizeHandle"></div></div>',content:'<div class="ewrLoading"><img src="'+EWR_IMAGES_FOLDER+'loading.gif" alt="" style="border: 0; width: 18px; height: 18px;">&nbsp;'+ewLanguage.Phrase("loading").replace("%s","")+"</div>",container:s("#ewrPopupFilterDialog")}).on("shown",function(e){ewrPopups[t]?(ewr_SetPopupContent.call(o[0],t,ewrPopups[t],n,r,i),u(),a()):s.ajax({cache:!1,dataType:"json",data:"popup="+t,url:window.location.href.split("?")[0].split("#")[0],success:function(e){var t=o.data("args");ewr_CreatePopup(t.popupname,e),ewr_SetPopupContent.call(o[0],t.popupname,e,t.useRange,t.rangeFrom,t.rangeTo),u(),a()},error:function(e){if(e.responseText){var t=o.data("popover").tip();t.find(".popover-content").empty().append('<p class="text-error">'+e.responseText+"</p>"),t.find(".modal-footer").empty(),u()}}})});var f=o.data("popover").tip(),l=f.find(".popover-content"),c=l.innerHeight()-l.height(),h;f.drag("start",function(e,t){var n=s(this);t.width=n.width(),t.height=n.height(),h=f.find(".modal-footer").outerHeight()}).drag(function(e,t){var n=s(this),r=Math.max(EWR_POPUP_MINWIDTH,t.width+t.deltaX),i=Math.max(EWR_POPUP_MINHEIGHT,t.height+t.deltaY);n.css({width:r,height:i}),n.find(".popover-content").height(i-h-c)},{handle:".ewResizeHandle"})}o.data("args",{popupname:t,useRange:n,rangeFrom:r,rangeTo:i}).popover("show")}function ewr_SetPopupContent(e,t,n,r,i){var s=jQuery,o=0,u=s(this);s.map(t,function(e){e.s===!1&&o++});var a=o==0,f=!1,l=a?' checked="checked"':"",c=s('<form id="'+e+'_FilterForm" class="form-horizontal" method="post">'+'<input type="hidden" name="popup" value="'+e+'">'+'<div class="ewPopupContainer"></div></form>'),h=c.find("div");if(n){h.append('<div class="ewPopupItem"><table class="ewPopupRange"><tr><td>'+ewLanguage.Phrase("PopupFrom")+"</td><td>"+'<select name="rf_'+e+'" style="width: auto;" onchange="ewr_SelectRange(this, \''+e+"');\">"+"</select></td></tr>"+"<tr><td>"+ewLanguage.Phrase("PopupTo")+"</td><td>"+'<select name="rt_'+e+'" style="width: auto;" onchange="ewr_SelectRange(this, \''+e+"');\">"+"</select></td></tr></table></div>");var p=h.find("select").first();p.append('<option value="">'+ewLanguage.Phrase("PopupSelect")+"</option>"),s.map(t,function(e){var t=e.k,n=e.v;if(t.substring(0,2)!="@@"&&t!=EWR_NULL_VALUE&&t!=EWR_EMPTY_VALUE){var i=t==r?' selected="selected"':"";p.append('<option value="'+t+'"'+i+">"+n+"</option>")}});var p=h.find("select").last();p.append('<option value="">'+ewLanguage.Phrase("PopupSelect")+"</option>"),s.map(t,function(e){var t=e.k,n=e.v;t.substring(0,2)!="@@"&&t!=EWR_NULL_VALUE&&t!=EWR_EMPTY_VALUE&&(selected=t==i?' selected="selected"':"",p.append('<option value="'+t+'"'+selected+">"+n+"</option>"))}),h.append('<div class="ewPopupDivider"></div>')}h.append('<div class="ewPopupItem checkbox"><label><input type="checkbox" name="sel_'+e+'[]" value="" onclick="ewr_SelectAll(this);"'+l+">"+ewLanguage.Phrase("PopupAll")+"</label></div>"),s.map(t,function(t){var n=t.k,r=t.v,i=t.s?' checked="checked"':"";n.substring(0,2)=="@@"?f=!0:f&&(f=!1,h.append('<div class="ewPopupDivider"></div>')),h.append('<div class="ewPopupItem checkbox"><label><input type="checkbox" name="sel_'+e+'[]" value="'+n+'" onclick="ewr_UpdateSelectAll(this);"'+i+">"+r+"</label></div>")});var d=u.data("popover").tip();d.find(".popover-content").empty().append(c),d.find(".modal-footer").empty()}function ewr_SelectedEntry(e,t){var n=jQuery,r=n(e.elements["sel_"+t+"[]"]);return r.length>0?r.filter(":not(:first):checked").length>0:r.prop("checked")}function ewr_SelectAll(e){ewr_ClearRange(e),jQuery(e.form.elements).filter("input:checkbox[name='"+e.name+"']:not(:first)").prop("checked",e.checked)}function ewr_UpdateSelectAll(e){ewr_ClearRange(e),f.elements[e.name][0].checked=jQuery(e.form.elements).filter("input:checkbox[name='"+e.name+"']:not(:first):not(:checked)").length==0}function ewr_SelectRange(e){var t,n,r=e.form,i=e.name.replace(/^r[ft]_/,"");r.elements["rf_"+i].selectedIndex>-1&&(t=r.elements["rf_"+i].options[r.elements["rf_"+i].selectedIndex].value),r.elements["rt_"+i].selectedIndex>-1&&(n=r.elements["rt_"+i].options[r.elements["rt_"+i].selectedIndex].value);if(!$.isValue(t)||!$.isValue(n)||t===""||n==="")return;ewr_SetRange(e,t,n,!0)}function ewr_ClearRange(e){var t=e.form,n=e.name.replace(/^sel__/,"").replace(/\[\]$/,""),r=t.elements["rf_"+n],i=t.elements["rt_"+n];r&&i&&r.selectedIndex>0&&i.selectedIndex>0&&(r.selectedIndex=0,i.selectedIndex=0,ewr_SetRange(e,r.options[r.selectedIndex].value,i.options[i.selectedIndex].value,!1))}function ewr_SetRange(e,t,n,r){var i=jQuery,s=e.form,o=e.name.replace(/^r[ft]_/,"sel_")+"[]",u;i(s.elements).filter("input:checkbox[name='"+o+"']").each(function(){this.value==t&&(u=!0),u?this.checked=r:r&&(this.checked=!1),this.value==n&&(u=!1)})}function ewr_Page(e){this.Name=e,this.PageID="",this.ValidateRequired=!0}function ewr_Form(e){var t=jQuery;this.ID=e,this.$Element=null,this.Form=null,this.InitSearchPanel=!1,this.ToggleHighlight=function(e,n){t("span."+n).toggleClass("ewHighlightSearch");var r=t(e).toggleClass("ewHideHighlight");r.html(r.hasClass("ewHideHighlight")?ewLanguage.Phrase("HideHighlight"):ewLanguage.Phrase("ShowHighlight"))},this.SrchOprChanged=function(e){var n=this.GetForm(),r=t(n),i=t.isString(e)?n.elements[e]:e;if(!i)return;var s=/^so2_/.test(i.id)?i.id.substr(4):i.id.substr(3),o=t(i).val(),u=o=="BETWEEN",a=o=="IS NULL"||o=="IS NOT NULL";/^so_/.test(i.id)&&r.find("[name^=sv_"+s+"],[name^=cal_sv_"+s+"]").prop("disabled",a),/^so2_/.test(i.id)&&r.find("[name^=sv2_"+s+"],[name^=cal_sv2_"+s+"]").prop("disabled",a),r.find("span.btw0_"+s).toggle(!u).end().find("span.btw1_"+s).toggle(u).find(":input").prop("disabled",!u)},this.ValidateRequired=!0,this.Validate=null,this.DisableForm=function(){if(!EWR_DISABLE_BUTTON_ON_SUBMIT)return;var e=this.GetForm();t(e).find(":submit, :reset").prop("disabled",!0).addClass("disabled")},this.EnableForm=function(){if(!EWR_DISABLE_BUTTON_ON_SUBMIT)return;var e=this.GetForm();t(e).find(":submit, :reset").prop("disabled",!1).removeClass("disabled")},this.Submit=function(e){var n=this.GetForm(),r=t(n);return this.DisableForm(),!this.Validate||this.Validate()?(e&&(n.action=e),r.find("input[name^=s_],input[name^=sx_],input[name^=q_]").prop("disabled",!0),n.submit()):this.EnableForm(),!1},this.EmptyRow=null,this.MultiPage=null,this.Lists={},this.AutoSuggests={},this.GetForm=function(){return this.Form||(this.$Element=t("#"+this.ID),this.$Element.is("form")?this.Form=this.$Element[0]:this.$Element.is("div")&&(this.Form=this.$Element.closest("form")[0])),this.Form},this.PostAutoSuggest=function(){},this.UpdateOpts=function(e){if(e===$rowindex$)return;var n=[],r=this.GetForm();for(var i in this.Lists){var s=this.Lists[i].ParentFields.slice(),o=this.Lists[i].Ajax;if(t.isValue(e)){i=i.replace(/^x_/,"x"+e+"_");for(var u=0,a=s.length;u<a;u++)s[u]=s[u].replace(/^x_/,"x"+e+"_")}if(o){var f=[];for(var u=0,a=s.length;u<a;u++)f[f.length]=ewr_GetOptValues(s[u],r);n[n.length]=[i,f,!0,!1]}else ewr_UpdateOpt.call(this,i,s,null,!1)}for(var u=0,l=n.length;u<l;u++)ewr_UpdateOpt.apply(this,n[u])},this.OnError=function(e,t){return ewr_OnError(this,e,t)},this.Init=function(){var e=this,n=this.GetForm(),r=t(n);if(!n)return;var i=!0;i&&this.InitSearchPanel&&!ewr_HasFormData(n)&&r.find(".accordion-toggle[href$=_SearchBody]").click(),i&&r.find("select[id^=so_], select[id^=so2_]").each(function(){var e=t(this).change();e.val()!="BETWEEN"&&r.find("#so2_"+this.id.substr(2)).change()}),this.MultiPage&&this.MultiPage.Render(this.ID),this.UpdateOpts(),this.$Element.is("form")&&r.submit(function(t){return e.Submit()}),this.$Element.data("form",this)},ewrForms[this.ID]=this}function ewr_GetForm(e){var t=jQuery,n=t(e),r=n.closest(".ewForm");return r[0]||(r=n.closest(".ewGrid").find(".ewForm")),r[0]}function ewr_HasFormData(e){var t=jQuery,n=t(e).find("[name^=sv_][value!=''][value!='{value}'],[name^=sv2_][value!=''][value!='{value}']").get();for(var r=0,i=n.length;r<i;r++){var s=n[r];if(/^(so|so2)_/.test(s.name)){if(/^IS/.test(t(s).val()))return!0}else if(s.type=="checkbox"||s.type=="radio"){if(s.checked)return!0}else if(s.type=="select-one"||s.type=="select-multiple"){for(var o=0,u=s.options.length;o<u;o++)if(s.options[o].selected&&s.options[o].value!=""&&s.options[o].value!="##all##")return!0}else if(s.type=="text"||s.type=="hidden"||s.type=="textarea")return!0}return!1}function ewr_UpdateOpt(e,t,n,r){var i=jQuery,s=this,o=i(this),u=function(){o.dequeue()};if(!e||e.length==0)return u();var a=this.Form?this.Form:this.form?this.form:null;this.form&&/^x\d+_/.test(this.id)&&(a=ewr_GetForm(this));if(!a)return u();var f=this.Form?this:ewrForms[a.id];if(!f)return u();var l=i.makeArray(arguments);if(this.form&&i.isArray(e)&&i.isString(e[0])){for(var c=0,h=e.length;c<h;c++)o.queue(i.proxy(ewr_UpdateOpt,s,e[c],t,n,r));var p=f.Lists[this.id.replace(/^[xy]\d*_/,"x_")];return u()}i.isString(e)&&(e=ewr_GetElements(e,a));var d=ewr_GetOptValues(e),v=ewr_GetId(e,!1);if(!v)return u();var m=v.replace(/^([xy])(\d*)_/,"x_"),g=RegExp.$1,y=RegExp.$2,b=[];if(i.isUndefined(t)){t=f.Lists[m].ParentFields.slice();if(y!="")for(var c=0,h=t.length;c<h;c++)t[c]=t[c].replace(/^x_/,"x"+y+"_");else g=="y"}if(i.isArray(t)&&t.length>0)if(i.isArray(t[0]))b=t;else if(i.isString(t[0]))for(var c=0,h=t.length;c<h;c++)b[b.length]=ewr_GetOptValues(t[c],a);ewr_IsAutoSuggest(e)||ewr_ClearOpt(e);var w=function(t){for(var n=0,s=t.length;n<s;n++){var o={data:t[n],parents:b,valid:!0,name:ewr_GetId(e),form:a};i(document).trigger("addoption",[o]),o.valid&&ewr_NewOpt(e,t[n],a)}!e.options&&e.length&&(ewr_RenderOpt(e,a),e=ewr_GetElements(v,a)),ewr_SelectOpt(e,d),r!==!1&&i(e).first().change()};i.isUndefined(n)&&(n=f.Lists[m].Ajax);if(!i.isBoolean(n)){var E=f.Lists[m].Options;return w(E),/s(ea)?rch$/.test(a.id)&&g=="x"&&(l[0]=v.replace(/^x_/,"y_"),ewr_UpdateOpt.apply(this,l)),u()}var S=ewr_GetId(e),x=i(a).find("#s_"+S).val();if(!x)return u();x+="&type=updateopt&name="+S,ewr_IsAutoSuggest(e)&&this.Form&&(x+="&v0="+encodeURIComponent(d[0]));for(var c=0,T=b.length;c<T;c++)x+="&v"+(c+1)+"="+encodeURIComponent(b[c].join(","));i.post(EWR_LOOKUP_FILE_NAME,x,function(e){w(e||[])},"json").always(function(){o.dequeue()}),/s(ea)?rch$/.test(a.id)&&g=="x"&&(l[0]=v.replace(/^x_/,"y_"),ewr_UpdateOpt.apply(this,l))}function ewr_ClearOpt(e){if(e.options){var t=1;for(var n=e.length-1;n>=t;n--)e.options[n].value.substr(0,2)!="@@"&&(e.options[n]=null)}else if(e.length){var r=jQuery,i=ewr_GetId(e),s=ewr_GetElement("dsl_"+i,e[0].form);r(s).data("options",[]).find("table."+EWR_ITEM_TABLE_CLASSNAME).remove();var o=ewr_GetElements(i,s);for(var n=0;n<o.length;n++){var u=o[n],a=u.value;if(a.substr(0,2)=="@@"){var f=ewrDom.getAncestorBy(u,function(e){return ewr_SameText(e.tagName,"LABEL")}),l=f?f.innerHTML.replace(/<[^>]*>/g,""):a;ewr_NewOpt(e,[a,l],u.form)}}}else if(ewr_IsAutoSuggest(e)){var c=ewr_GetAutoSuggest(e);c._options=[],c.input.value="",e.value=""}}function ewr_GetId(e,t){var n=jQuery,r="";return n.isString(e)?r=e:r=n(e).attr("name")||n(e).attr("id"),t!==!1&&/\[\]$/.test(r)&&(r=r.substr(0,r.length-2)),r}function ewr_GetOptValues(e,t){var n=jQuery,r=n.isString(e)?ewr_GetElements(e,t):e;return r.options?n(r).find("option:selected[value!='']").map(function(){return this.value}).get():n.isNumber(r.length)?n(r).filter(":checked[value!='{value}']").map(function(){return this.value}).get():[r.value]}function ewr_GetElements(e,t){var n=jQuery,t=n.isString(t)?"#"+t:t,r="[name='"+e+"']";r="input"+r+",select"+r+",textarea"+r+",button"+r;var i=t?n(t).find(r):n(r);return i.length==1&&i.is(":not(:checkbox):not(:radio)")?i[0]:i.get()}function ewr_NewOpt(e,t,n){var r=jQuery,i={data:t,id:ewr_GetId(e),form:n};r(document).trigger("newoption",[i]),t=i.data;var s=t[0],o=t[1];for(var u=2;u<=4;u++)t[u]&&t[u]!=""&&(o!=""&&(o+=ewr_ValueSeparator(u-1,e)),o+=t[u]);if(e.options)e.options[e.length]=new Option(o,s,!1,!1);else if(e.length){var r=jQuery,a=r(ewr_GetElement("dsl_"+ewr_GetId(e),n)),f=a.data("options");a[0]&&f&&(f[f.length]={val:s,lbl:o})}else if(ewr_IsAutoSuggest(e)){var l=ewr_GetAutoSuggest(e);l._options[l._options.length]={val:s,lbl:o}}return o}function ewr_RenderOpt(e,t){var n=ewr_GetId(e),r=jQuery,i=ewr_GetElement("dsl_"+n,t),s=r(i);if(!i||!s.data("options"))return;var o=ewr_GetElement("tp_"+n,t);if(!o)return;var u=parseInt(s.data("repeatcolumn"),10)||5;EWR_IS_MOBILE&&EWR_MOBILE_REFLOW&&(u=1);var a=r(o).contents(),f=s.data("options"),l=a.attr("type"),c=r('<table class="'+EWR_ITEM_TABLE_CLASSNAME+'"></table>'),h;if(f&&f.length){for(var p=0,d=f.length;p<d;p++){p%u==0&&(h=r("<tr></tr>"));var v=a.clone(!0).val(f[p].val),m=r('<label class="'+l+'">'+f[p].lbl+"</label>").prepend(v.attr("id",v.attr("id")+"_"+p));r("<td></td>").append(m).appendTo(h);if(p%u==u-1)c.append(h);else if(p==d-1){for(var g=p%u+1;g<u;g++)h.append("<td>&nbsp;</td>");c.append(h)}}s.append(c)}s.data("options",[])}function ewr_ValueSeparator(e,t){return", "}function ewr_SelectOpt(e,t){function o(e){if(!n(e).data("autoselect"))return!1;var t=ewr_GetForm(e);if(t){if(/s(ea)?rch$/.test(t.id))return!1;var r=e.id.replace(/^([xy])(\d*)_/,"x_");return r in ewrForms[t.id].Lists&&ewrForms[t.id].Lists[r].ParentFields.length==0?!1:!0}return!1}if(!e||!t)return;var n=jQuery;if(e.options)n(e).val(t),e.type=="select-one"&&e.selectedIndex==-1&&(e.selectedIndex=0);else if(e.length)e.length==1&&e[0].type=="checkbox"&&e[0].value!="{value}"?e[0].checked=ewr_ConvertToBool(e[0].value)===ewr_ConvertToBool(t[0]):n(e).val(t);else if(ewr_IsAutoSuggest(e)&&t.length==1){var r=ewr_GetAutoSuggest(e);for(var i=0,s=r._options.length;i<s;i++)if(r._options[i].val==t[0]){e.value=r._options[i].val,r.input.value=r._options[i].lbl;break}}else e.type&&(e.value=t.join(","));if(e.options)e.type=="select-one"&&e.options.length==2&&!e.options[1].selected&&o(e)?e.options[1].selected=!0:e.type=="select-multiple"&&e.options.length==1&&!e.options[0].selected&&o(e)&&(e.options[0].selected=!0);else if(e.length)e.length==2&&o(e[1])&&(e[1].checked=!0);else if(ewr_IsAutoSuggest(e)){var r=ewr_GetAutoSuggest(e);r._options.length==1&&o(e)&&(e.value=r._options[0].val,r.input.value=r._options[0].lbl)}}function ewr_AutoSuggest(e,t,n,r){var i=e.replace(/^[xy](\d*|\$rowindex\$)_/,"x_"),s=RegExp.$1,o={ac:{}};if(s=="$rowindex$")return o;var u=t.GetForm(),a=ewr_GetElement("sx_"+e,u);if(!a)return o;var f=ewr_GetElement("sc_"+e,u),l=ewr_GetElement("q_"+e,u),c=ewr_GetElement("em_"+e,u),h=t.Lists[i].ParentFields.slice();for(var p=0,d=h.length;p<d;p++)h[p]=h[p].replace(/^x_/,"x"+s+"_");this.input=a,this.element=ewr_GetElement(e,u),this._options=[];var v=this,m=jQuery,g=m(this.input),y=m(this.element);this.formatResult=function(e){return e[0]},this.generateRequest=function(e){var t=l.value;if(h.length>0)for(var n=0,r=h.length;n<r;n++){var i=ewr_GetOptValues(h[n],u);t+="&v"+(n+1)+"="+encodeURIComponent(i.join(","))}return"type=autosuggest&name="+this.element.name+"&q="+e+"&"+t},this.setValue=function(e){e=e||g.val();var t=jQuery.grep(g.data("results"),function(t){return t[t.length-1]==e});if(t.length==0){if(n&&e){g.val("").closest(".control-group").addClass("error"),m(c).show(),y.val("").change();return}}else{var r=g.data("typeahead").$menu.find(".active").index();e=g.data("results")[r][0]}y.val(e).change()},g.prop("autocomplete","off").typeahead({minLength:1,items:r,matcher:function(e){return!0},sorter:function(e){return e},source:function(e,t){m.post(EWR_LOOKUP_FILE_NAME,v.generateRequest(e),function(e){g.data("results",e||[]);var n=m.map(g.data("results"),function(e){return e[e.length]=v.formatResult(e)});n.length==0&&g.data("typeahead").$menu.html(""),t(n)},"json")},updater:function(e){return v.setValue(e),e}}).blur(function(e){if(g.data("typeahead").shown)return;v.setValue()}).focus(function(e){g.closest(".control-group").removeClass("error"),m(c).hide()}),this.ac=g.data("typeahead")}function ewr_GetElement(e,t){var n=jQuery,t=n.isString(t)?"#"+t:t,r="#"+e.replace(/([\$\[\]])/g,"\\$1")+",[name='"+e+"']";return t?n(t).find(r)[0]:n(r).first()[0]}function ewr_SameText(e,t){return String(e).toLowerCase()==String(t).toLowerCase()}function ewr_SameStr(e,t){return String(e)==String(t)}function ewr_InArray(e,t){if(!t)return-1;for(var n=0,r=t.length;n<r;n++)if(ewr_SameStr(t[n],e))return n;return-1}function ewr_SubmitLanguageForm(e){if(!e||!e.language||!e.language.value)return;var t=window.location.href;if(window.location.search){var n=window.location.search,r={};n.replace(/(?:\?|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r.language=encodeURIComponent(e.language.value);var i="?";for(var s in r)i+=s+"="+r[s]+"&";i=i.substr(0,i.length-1);var o=t.lastIndexOf(window.location.search);t=t.substr(0,o)+i}else t+="?language="+encodeURIComponent(e.language.value);window.location=t}function ewr_Sort(e,t,n){return n==2&&e.ctrlKey&&(t+="&ctrl=1"),location=t,!0}function ewr_IsAutoSuggest(e){var t=jQuery,n=t(e);return e&&n.is(":text:hidden")&&n.data("typeahead")}function ewr_GetAutoSuggest(e){return ewrForms(e).AutoSuggests[e.id]}function ewr_SetFocus(e){if(!e)return;var t=jQuery,n=t(e);!e.options&&e.length?e=n.filter("[value!='{value}']")[0]:ewr_IsAutoSuggest(e)&&(e=ewr_GetAutoSuggest(e).input);var r=n.closest(".control-group").addClass("error");n.focus().select().one("click keypress",function(){r.removeClass("error")})}function ewr_OnError(e,t,n){return alert(n),jQuery.later(100,this,"ewr_SetFocus",t),!1}function ewr_HasValue(e){return ewr_GetOptValues(e).join("")!=""}function ewr_HtmlEncode(e){var t=e;return t=t.replace(/&/g,"&amp"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t}function ewr_ClearForm(e){var t=jQuery;t(e).find("[id^=sv_],[id^=sv2_]").each(function(){if(this.type=="checkbox"||this.type=="radio")this.checked=!1;else if(this.type=="select-one")this.selectedIndex=0;else if(this.type=="select-multiple")t(this).find("option").prop("selected",!1);else if(this.type=="text"||this.type=="textarea")this.value="",ewr_IsAutoSuggest(this)&&(ewr_GetAutoSuggest(this).input.value="")})}function ewr_StopPropagation(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ewr_SetupTable(e,t,n){var r=jQuery,i=r(t),s=r(t.rows);if(!t||!t.rows||!n&&i.data("isset")||t.tBodies.length==0)return;var o=s.map(function(){return r(this.cells).removeClass(EWR_TABLE_LAST_ROW_CLASSNAME).last().addClass(EWR_TABLE_LAST_COL_CLASSNAME),this}).get();if(o.length){var u=o[o.length-1];r(u.cells).each(function(){r(this).addClass(EWR_TABLE_LAST_ROW_CLASSNAME)})}ewr_SetupGrid(e,i.closest("."+EWR_GRID_CLASSNAME)[0],n),i.data("isset",!0)}function ewr_Reflow(){if(!EWR_IS_MOBILE)return;var e=jQuery;e(".ewExtFilterForm, .ewForm:has(div.control-group)").each(function(){$el=e(this),$el.is(".ewExtFilterForm")?$el.find(".ewRow:has(.ewCell)").each(function(){var t=e(this);t.find(".ewCell").hide().each(function(){var n=e(this);e("<div></div>").append(n.find(".ewSearchCaption:first")).addClass("ewLabelRow").appendTo(t),n.find(".ewSearchOperator:first").appendTo(t.find(".ewLabelRow:last")),e("<div></div>").append(n.contents()).addClass("ewInputRow").appendTo(t)})}):$el.is(".ewForm")&&$el.removeClass("form-horizontal")})}function ewr_SetupGrid(e,t,n){var r=jQuery,i=r(t);if(!t||!n&&i.data("isset"))return;var s=i.find("table."+EWR_TABLE_CLASSNAME+" > tbody:first > tr").length,o=i.find("div.ewGridUpperPanel"),u=i.find("div.ewGridMiddlePanel"),a=i.find("div.ewGridLowerPanel"),f=s==0;o[0]&&a[0]?a.toggleClass("hide",s==0):(!o[0]||!!a[0])&&a[0]&&!o[0],i.data("isset",!0)}function ewr_DragStart(e,t){var n=jQuery,r=n(this),i=n("body");t.limit=i.offset(),t.limit.bottom=t.limit.top+i.outerHeight()-r.outerHeight(),t.limit.right=t.limit.left+i.outerWidth()-r.outerWidth()}function ewr_Drag(e,t){var n=jQuery,r=n(this),i=n("body"),s=parseInt(r.css("margin-left"),10),o=parseInt(r.css("margin-top"),10),u=r.outerWidth()>i.outerWidth()?Math.max(t.limit.left-s,t.offsetX-s):Math.min(t.limit.right-s,Math.max(t.limit.left-s,t.offsetX-s)),a=r.outerHeight()>i.outerHeight()?Math.max(t.limit.top-o,t.offsetY-o):Math.min(t.limit.bottom-o,Math.max(t.limit.top-o,t.offsetY-o));r.css({top:a,left:u})}function ewr_EmailDialogShow(e){var t=jQuery,n=ewrEmailDialog||t("#ewrEmailDialog").drag("start",ewr_DragStart).drag(ewr_Drag,{handle:".modal-header"});if(!n)return;var r=n.find(".modal-body form").data("args",e),i=r.data("form");i||(i=new ewr_Form(r.attr("id")),i.Validate=function(){var e,t=this.GetForm();return e=t.elements.sender,e&&!ewr_HasValue(e)?this.OnError(e,ewLanguage.Phrase("EnterSenderEmail")):e&&!ewr_CheckEmailList(e.value,1)?this.OnError(e,ewLanguage.Phrase("EnterProperSenderEmail")):(e=t.elements.recipient,e&&!ewr_HasValue(e)?this.OnError(e,ewLanguage.Phrase("EnterRecipientEmail")):e&&!ewr_CheckEmailList(e.value,EWR_MAX_EMAIL_RECIPIENT)?this.OnError(e,ewLanguage.Phrase("EnterProperRecipientEmail")):(e=t.elements.cc,e&&!ewr_CheckEmailList(e.value,EWR_MAX_EMAIL_RECIPIENT)?this.OnError(e,ewLanguage.Phrase("EnterProperCcEmail")):(e=t.elements.bcc,e&&!ewr_CheckEmailList(e.value,EWR_MAX_EMAIL_RECIPIENT)?this.OnError(e,ewLanguage.Phrase("EnterProperBccEmail")):(e=t.elements.subject,e&&!ewr_HasValue(e)?this.OnError(e,ewLanguage.Phrase("EnterSubject")):!0))))},i.Submit=function(){var e=this.GetForm(),r=t(e),i=r.data("args"),s=ewr_GetOptValues("contenttype",e);if(i.url&&i.exportid&&s=="html"){if(!this.Validate())return!1;n.modal("hide"),ewr_ExportCharts(i.el,i.url,i.exportid,e)}else t.post(e.action,r.serialize(),function(e){ewr_ShowMessage(e)}),n.modal("hide");return!1},r.data("form",i)),n.modal("hide").find(".modal-header h3").html(e.hdr),n.find(".modal-footer .btn-primary").unbind().click(function(e){e.preventDefault(),i.Submit()&&n.modal("hide")}),ewrEmailDialog=n.modal("show")}function ewr_Ajax(e,t,n){if(!e)return undefined;var r=jQuery,i={s:e};i=r.extend(i,r.isObject(t)?t:{q:t});if(!r.isFunction(n)){var s=r.ajax({async:!1,type:"POST",data:i}).responseText,o=r.parseJSON(s);return o.length==1?(o=o[0],r.isArray(o)&&o.length==1?o[0]:o):o}r.post(EWR_LOOKUP_FILE_NAME,i,n,"json")}function ewr_ShowDrillDown(e,t,n,r,i){if(e?e.ctrlKey:window._ctrlKey)return ewr_Redirect(n.replace("?d=1&","?d=2&")),!1;var s=jQuery,o=s.isString(t)?"top":"bottom",u=s.isString(t)?s("#"+t):s(t),a={obj:u[0],id:r,url:n,hdr:i};s(document).trigger("drilldown",[a]);var f=a.url.split("?"),l=f[0]?f[0]:"",c=f[1]?f[1]:"";u.data("popover")||u.popover({html:!0,placement:o,trigger:"manual",template:'<div class="popover"><h3 class="popover-title" style="cursor: move;"></h3><div class="popover-content"></div><div class="ewResizeHandle"></div></div>',content:'<div class="ewrLoading"><img src="'+EWR_IMAGES_FOLDER+'loading.gif" alt="" style="border: 0; width: 18px; height: 18px;">&nbsp;'+ewLanguage.Phrase("loading").replace("%s","")+"</div>",container:s("#ewrDrillDownPanel")}).on("show",function(e){u.attr("data-original-title","")}).on("shown",function(e){s.ajax({cache:!1,dataType:"html",type:"POST",data:c,url:l,success:function(e){var t=u.data("popover").tip().drag("start",ewr_DragStart).drag(ewr_Drag,{handle:".popover-title"});a.hdr&&t.find(".popover-title").empty().append('<button type="button" class="close" aria-hidden="true">&times;</button>'+a.hdr).find(".close").click(function(){u.popover("hide")});var n=ewr_StripScript(e),i=/<body[^>]*>([\s\S]*?)<\/body\s*>/i;n.match(i)&&(n=RegExp.$1);var s=t.find(".popover-content").html(ewr_StripScript(n));if(EWR_IS_MOBILE){var o=s.find("#ewContainer")[0];o&&s.empty().append(o)}s.find(".ewTable").each(ewr_SetupTable),ewr_ExecScript(e,r)},error:function(e){if(e.responseText){var t=$el.data("popover").tip();t.find(".popover-content").empty().append('<p class="text-error">'+e.responseText+"</p>")}}})}).on("hidden",function(e){for(var t=0;t<ewrDrillCharts.length;t++){var n=FusionCharts(ewrDrillCharts[t]);n.dispose()}ewrDrillCharts=[],ewr_RemoveScript(r)}),u.data("args",a).popover("show")}function ewr_ExecScript(e,t){var n,r=0,i=/<script([^>]*)>([\s\S]*?)<\/script\s*>/ig;while((n=i.exec(e))!=null){var s=RegExp.$2;s!=""&&/(\s+type\s*=\s*['"]*(text|application)\/(java|ecma)script['"]*)|^((?!\s+type\s*=).)*$/i.test(RegExp.$1)&&ewr_AddScript(s,"scr_"+t+"_"+r++)}}function ewr_StripScript(e){var t,n=/<script([^>]*)>([\s\S]*?)<\/script\s*>/ig,r=e;while((t=n.exec(e))!=null){var i=RegExp.lastMatch;/(\s+type\s*=\s*['"]*(text|application)\/(java|ecma)script['"]*)|^((?!\s+type\s*=).)*$/i.test(RegExp.$1)&&(r=r.replace(i,""))}return r}function ewr_AddScript(e,t){var n=document.createElement("SCRIPT");return t&&(n.id=t),n.type="text/javascript",n.text=e,document.body.appendChild(n)}function ewr_RemoveScript(e){e&&jQuery("script[id^='scr_"+e+"_']").remove()}function ewr_Language(e){this.obj=e,this.Phrase=function(e){return this.obj[e.toLowerCase()]}}function ewr_ApplyTemplate(e,t,n,r,i){var s=jQuery,o=s("#"+t);if(!s.views||!o[0])return;s("span[data-class^=tp],div[data-class^=tp]").html(function(){var e=s(this);return'<script type="text/html" class="'+n+'" id="'+e.data("class")+'">'+e.html()+"</scr"+"ipt>"}),o.attr("type")||o.attr("type","text/html");var u={data:i||{},id:e,template:t,enabled:!0};s(document).trigger("rendertemplate",[u]),u.enabled&&s("#"+e).html(o.render(u.data)),r&&r!="print"&&s(function(){var t="<html><head>";r=="pdf"?t+="<link rel='stylesheet' type='text/css' href='"+EWR_PDF_STYLESHEET_FILENAME+"'>":t+="<style>"+s.ajax({async:!1,type:"GET",url:EWR_PROJECT_STYLESHEET_FILENAME}).responseText+"</style>",t+="</head><body>",s("span.ewChartBefore").each(function(){t+=s(this).html()}),t+=s("#"+e).html(),s("span.ewChartAfter").each(function(){t+=s(this).html()}),t+="</body></html>";var i=window.location.href.split("?")[0];if(r=="email"){var o=window.location.search.replace(/^\?/,"")+"&"+s.param({customexport:r,data:t,filename:n});s.post(i,o,function(e){ewr_ShowMessage(e)})}else s("<form>").attr({method:"post",action:i}).append(s("<input type='hidden'>").attr({name:"customexport",value:r}),s("<input type='hidden'>").attr({name:"data",value:t}),s("<input type='hidden'>").attr({name:"filename",value:n})).appendTo("body").submit();window.location!=window.parent.location&&window.parent.jQuery&&window.parent.jQuery("body").css("cursor","default")})}function ewr_RenderTemplate(e){var t=jQuery,n=t("#"+e);if(!t.views||!n[0])return;n.attr("type")||n.attr("type","text/html");var r={data:{},template:e};return t(document).trigger("rendertemplate",[r]),n.render(r.data)}function ewr_ShowMessage(e){if(window.location!=window.parent.location&&parent.ewr_ShowMessage)return parent.ewr_ShowMessage(e);var t=jQuery,n=t("div.ewMessageDialog:first"),r=e||(n.length?EWR_IS_MOBILE?n.text():n.html():"");if(t.trim(r)=="")return;if(EWR_IS_MOBILE)alert(r);else{var i=t("#ewrMsgBox");i.find(".modal-body").html(r),i.modal("show")}}function ewr_ToggleSrchOpr(e,t){var n=this.form.elements[e];if(!n)return;n.value=n.value!=t?t:"="}function ewr_CheckUSDate(e){return ewr_CheckDateEx(e,"us",EWR_DATE_SEPARATOR)}function ewr_CheckShortUSDate(e){return ewr_CheckDateEx(e,"usshort",EWR_DATE_SEPARATOR)}function ewr_CheckDate(e){return ewr_CheckDateEx(e,"std",EWR_DATE_SEPARATOR)}function ewr_CheckShortDate(e){return ewr_CheckDateEx(e,"stdshort",EWR_DATE_SEPARATOR)}function ewr_CheckEuroDate(e){return ewr_CheckDateEx(e,"euro",EWR_DATE_SEPARATOR)}function ewr_CheckShortEuroDate(e){return ewr_CheckDateEx(e,"euroshort",EWR_DATE_SEPARATOR)}function ewr_CheckDateEx(e,t,n){if(e==null||e.length=="")return!0;while(e.indexOf("  ")>-1)e=e.replace(/  /g," ");e=e.replace(/^\s*|\s*$/g,"");var r=e.split(" ");if(r.length>0){var i,s,o,u;i=/^([0-9]{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2][0-9]|[3][0|1])$/;if(ar=i.exec(r[0]))s=ar[1],o=ar[2],u=ar[3];else{var a="\\"+n;switch(t){case"std":i=new RegExp("^(\\d{4})"+a+"([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])$");break;case"stdshort":i=new RegExp("^(\\d{2})"+a+"([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])$");break;case"us":i=new RegExp("^([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"(\\d{4})$");break;case"usshort":i=new RegExp("^([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"(\\d{2})$");break;case"euro":i=new RegExp("^([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"([0]?[1-9]|[1][0-2])"+a+"(\\d{4})$");break;case"euroshort":i=new RegExp("^([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"([0]?[1-9]|[1][0-2])"+a+"(\\d{2})$")}if(!i.test(r[0]))return!1;var f=r[0].split(n);switch(t){case"std":case"stdshort":s=ewr_UnformatYear(f[0]),o=f[1],u=f[2];break;case"us":case"usshort":s=ewr_UnformatYear(f[2]),o=f[0],u=f[1];break;case"euro":case"euroshort":s=ewr_UnformatYear(f[2]),o=f[1],u=f[0]}}if(!ewr_CheckDay(s,o,u))return!1}return r.length>1&&!ewr_CheckTime(r[1])?!1:!0}function ewr_UnformatYear(e){return e.length==2?e>EWR_UNFORMAT_YEAR?"19"+e:"20"+e:e}function ewr_CheckDay(e,t,n){e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10);var r=ewr_InArray(t,[4,6,9,11])>-1?30:31;return t==2&&(r=e%4>0||e%100==0&&e%400>0?28:29),ewr_CheckRange(n,1,r)}function ewr_CheckInteger(e){return!e||e.length==0?!0:e.indexOf(EWR_DECIMAL_POINT)>-1?!1:ewr_CheckNumber(e)}function ewr_CheckNumber(e){e=String(e);if(!e||e.length==0)return!0;e=e.replace
(/^\s*|\s*$/g,"");var t=new RegExp("^[+-]?(\\d{1,3}("+(EWR_THOUSANDS_SEP?"\\"+EWR_THOUSANDS_SEP+"?":"")+"\\d{3})*(\\"+EWR_DECIMAL_POINT+"\\d+)?|\\"+EWR_DECIMAL_POINT+"\\d+)$");return t.test(e)}function ewr_StrToFloat(e){e=String(e);if(EWR_THOUSANDS_SEP!=""){var t=new RegExp("\\"+EWR_THOUSANDS_SEP,"g");e=e.replace(t,"")}return EWR_DECIMAL_POINT!=""&&(e=e.replace(EWR_DECIMAL_POINT,".")),parseFloat(e)}function ewr_StrToDate(e){var t=/^(\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\d|[3][0|1]) (?:(0\d|1\d|2[0-3]):([0-5]\d):([0-5]\d))?$/,n=e.replace(t,"$1 $2 $3 $4 $5 $6").split(" ");return new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5])}function ewr_CheckRange(e,t,n){if(!e||e.length==0)return!0;var r=jQuery;return(r.isNumber(t)||r.isNumber(n))&&ewr_CheckNumber(e)&&(e=ewr_StrToFloat(e)),!r.isNull(t)&&e<t?!1:!r.isNull(n)&&e>n?!1:!0}function ewr_CheckTime(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^(0\d|1\d|2[0-3]):[0-5]\d:[0-5]\d$/;return t.test(e)}function ewr_CheckPhone(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^\(\d{3}\) ?\d{3}( |-)?\d{4}|^\d{3}( |-)?\d{3}( |-)?\d{4}$/;return t.test(e)}function ewr_CheckZip(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^\d{5}$|^\d{5}-\d{4}$/;return t.test(e)}function ewr_CheckCreditCard(e){if(!e||e.length==0)return!0;var t=e.replace(/\D/g,"");if(t.length==0)return!1;var n=t.length%2==1?!1:!0,r,i=0;for(var s=0,o=t.length;s<o;s++)r=parseInt(t.charAt(s)),n?(r*=2,i+=r%10,r/10>=1&&i++,n=!1):(i+=r,n=!0);return i%10==0}function ewr_CheckSSC(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^(?!000)([0-6]\d{2}|7([0-6]\d|7[012]))([ -]?)(?!00)\d\d\3(?!0000)\d{4}$/;return t.test(e)}function ewr_CheckEmailList(e,t){if(!e||e.length==0)return!0;var n=e.replace(/,/g,";").split(";");for(var r=0,i=n.length;r<i;r++){if(t>0&&i>t)return!1;if(!ewr_CheckEmail(n[r]))return!1}return!0}function ewr_CheckEmail(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^[\w.%+-]+@[\w.-]+\.[A-Z]{2,6}$/i;return t.test(e)}function ewr_CheckGUID(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^\{\w{8}-\w{4}-\w{4}-\w{4}-\w{12}\}$/,n=/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/;return t.test(e)||n.test(e)}function ewr_CheckByRegEx(e,t){return!e||e.length==0?!0:e.match(t)?!0:!1}function ewr_Redirect(e,t,n){if(!n||n.toLowerCase()=="post"){var r=jQuery,i={},s=t?r(t):r("<form></form>").appendTo("body");s.attr({action:e.split("?")[0],method:"post"}),e.replace(/(?:\?|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&r('<input type="hidden"/>').attr({name:t,value:n}).appendTo(s)}),s.submit()}else window.location=e}function ewr_CreateCalendar(e,t){var n=jQuery,r=n(t),i=r.next("button[id^=cal_]").css("height",r.outerHeight()),s=i.data("format");r.data("calendar",Calendar.setup({inputField:t,showsTime:/ %H:%M:%S$/.test(s),ifFormat:s,button:i[0],cache:!0})).wrap('<span class="input-append"></span>').after(i)}function ewr_UserAgent(e){var t=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return t++===1?"":"."}))},n=window,r=n&&n.navigator,i={ie:0,opera:0,gecko:0,webkit:0,safari:0,chrome:0,mobile:null,air:0,phantomjs:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,silk:0,accel:!1,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null,nodejs:0,winjs:typeof Windows!="undefined"&&!!Windows.System,touchEnabled:!1},s=e||r&&r.userAgent,o=n&&n.location,u=o&&o.href,a;return i.userAgent=s,i.secure=u&&u.toLowerCase().indexOf("https")===0,s&&(/windows|win32/i.test(s)?i.os="windows":/macintosh|mac_powerpc/i.test(s)?i.os="macintosh":/android/i.test(s)?i.os="android":/symbos/i.test(s)?i.os="symbos":/linux/i.test(s)?i.os="linux":/rhino/i.test(s)&&(i.os="rhino"),/KHTML/.test(s)&&(i.webkit=1),/IEMobile|XBLWP7/.test(s)&&(i.mobile="windows"),/Fennec/.test(s)&&(i.mobile="gecko"),a=s.match(/AppleWebKit\/([^\s]*)/),a&&a[1]&&(i.webkit=t(a[1]),i.safari=i.webkit,/PhantomJS/.test(s)&&(a=s.match(/PhantomJS\/([^\s]*)/),a&&a[1]&&(i.phantomjs=t(a[1]))),/ Mobile\//.test(s)||/iPad|iPod|iPhone/.test(s)?(i.mobile="Apple",a=s.match(/OS ([^\s]*)/),a&&a[1]&&(a=t(a[1].replace("_","."))),i.ios=a,i.os="ios",i.ipad=i.ipod=i.iphone=0,a=s.match(/iPad|iPod|iPhone/),a&&a[0]&&(i[a[0].toLowerCase()]=i.ios)):(a=s.match(/NokiaN[^\/]*|webOS\/\d\.\d/),a&&(i.mobile=a[0]),/webOS/.test(s)&&(i.mobile="WebOS",a=s.match(/webOS\/([^\s]*);/),a&&a[1]&&(i.webos=t(a[1]))),/ Android/.test(s)&&(/Mobile/.test(s)&&(i.mobile="Android"),a=s.match(/Android ([^\s]*);/),a&&a[1]&&(i.android=t(a[1]))),/Silk/.test(s)&&(a=s.match(/Silk\/([^\s]*)\)/),a&&a[1]&&(i.silk=t(a[1])),i.android||(i.android=2.34,i.os="Android"),/Accelerated=true/.test(s)&&(i.accel=!0))),a=s.match(/(Chrome|CrMo|CriOS)\/([^\s]*)/),a&&a[1]&&a[2]?(i.chrome=t(a[2]),i.safari=0,a[1]==="CrMo"&&(i.mobile="chrome")):(a=s.match(/AdobeAIR\/([^\s]*)/),a&&(i.air=a[0]))),i.webkit||(/Opera/.test(s)?(a=s.match(/Opera[\s\/]([^\s]*)/),a&&a[1]&&(i.opera=t(a[1])),a=s.match(/Version\/([^\s]*)/),a&&a[1]&&(i.opera=t(a[1])),/Opera Mobi/.test(s)&&(i.mobile="opera",a=s.replace("Opera Mobi","").match(/Opera ([^\s]*)/),a&&a[1]&&(i.opera=t(a[1]))),a=s.match(/Opera Mini[^;]*/),a&&(i.mobile=a[0])):(a=s.match(/MSIE\s([^;]*)/),a&&a[1]?i.ie=t(a[1]):(a=s.match(/Gecko\/([^\s]*)/),a&&(i.gecko=1,a=s.match(/rv:([^\s\)]*)/),a&&a[1]&&(i.gecko=t(a[1]))))))),n&&r&&!(i.chrome&&i.chrome<6)&&(i.touchEnabled="ontouchstart"in n||"msMaxTouchPoints"in r&&r.msMaxTouchPoints>0),e||typeof process=="object"&&process.versions&&process.versions.node&&(i.os=process.platform,i.nodejs=t(process.versions.node)),i}function ewr_Extend(e){e.extend({isBoolean:function(e){return typeof e=="boolean"},isNull:function(e){return e===null},isNumber:function(e){return typeof e=="number"&&isFinite(e)},isObject:function(e){return e&&(typeof e=="object"||this.isFunction(e))||!1},isString:function(e){return typeof e=="string"},isUndefined:function(e){return typeof e=="undefined"},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isDate:function(e){return this.type(e)==="date"&&e.toString()!=="Invalid Date"&&!isNaN(e)},later:function(e,t,n,r,i){e=e||0,t=t||{};var s=n,o=r,u,a;this.isString(n)&&(s=t[n]);if(!s)return;return!this.isUndefined(r)&&!this.isArray(o)&&(o=[r]),u=function(){s.apply(t,o||[])},a=i?setInterval(u,e):setTimeout(u,e),{interval:i,cancel:function(){this.interval?clearInterval(a):clearTimeout(a)}}},ua:ewr_UserAgent()}),function(t){t.fn.drag=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drag")!==0&&(i="drag"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)};var n=t.event,r=n.special,i=r.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,i.datakey),r=e.data||{};n.related+=1,t.each(i.defaults,function(e,t){r[e]!==undefined&&(n[e]=r[e])})},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(t.data(this,i.datakey))return;var e=t.extend({related:0},i.defaults);t.data(this,i.datakey,e),n.add(this,"touchstart mousedown",i.init,e),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)},teardown:function(){var e=t.data(this,i.datakey)||{};if(e.related)return;t.removeData(this,i.datakey),n.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart)},init:function(e){if(i.touched)return;var s=e.data,o;if(e.which!=0&&s.which>0&&e.which!=s.which)return;if(t(e.target).is(s.not))return;if(s.handle&&!t(e.target).closest(s.handle,e.currentTarget).length)return;i.touched=e.type=="touchstart"?this:null,s.propagates=1,s.mousedown=this,s.interactions=[i.interaction(this,s)],s.target=e.target,s.pageX=e.pageX,s.pageY=e.pageY,s.dragging=null,o=i.hijack(e,"draginit",s);if(!s.propagates)return;o=i.flatten(o),o&&o.length&&(s.interactions=[],t.each(o,function(){s.interactions.push(i.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&r.drop&&r.drop.handler(e,s),i.textselect(!1),i.touched?n.add(i.touched,"touchmove touchend",i.handler,s):n.add(document,"mousemove mouseup",i.handler,s);if(!i.touched||s.live)return!1},interaction:function(e,n){var r=t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new i.callback,droppable:[],offset:r}},handler:function(e){var s=e.data;switch(e.type){case!s.dragging&&"touchmove":e.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(e.pageX-s.pageX,2)+Math.pow(e.pageY-s.pageY,2)<Math.pow(s.distance,2))break;e.target=s.target,i.hijack(e,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(s.dragging){i.hijack(e,"drag",s);if(s.propagates){s.drop!==!1&&r.drop&&r.drop.handler(e,s);break}e.type="mouseup"};case"touchend":case"mouseup":default:i.touched?n.remove(i.touched,"touchmove touchend",i.handler):n.remove(document,"mousemove mouseup",i.handler),s.dragging&&(s.drop!==!1&&r.drop&&r.drop.handler(e,s),i.hijack(e,"dragend",s)),i.textselect(!0),s.click===!1&&s.dragging&&t.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=i.touched=!1}},hijack:function(e,r,s,o,u){if(!s)return;var a={event:e.originalEvent,type:e.type},f=r.indexOf("drop")?"drag":"drop",l,c=o||0,h,p,d,v=isNaN(o)?s.interactions.length:o;e.type=r,e.originalEvent=null,s.results=[];do if(h=s.interactions[c]){if(r!=="dragend"&&h.cancelled)continue;d=i.properties(e,s,h),h.results=[],t(u||h[f]||s.droppable).each(function(o,u){d.target=u,e.isPropagationStopped=function(){return!1},l=u?n.dispatch.call(u,e,d):null,l===!1?(f=="drag"&&(h.cancelled=!0,s.propagates-=1),r=="drop"&&(h[f][o]=null)):r=="dropinit"&&h.droppable.push(i.element(l)||u),r=="dragstart"&&(h.proxy=t(i.element(l)||h.drag)[0]),h.results.push(l),delete e.result;if(r!=="dropinit")return l}),s.results[c]=i.flatten(h.results),r=="dropinit"&&(h.droppable=i.flatten(h.droppable)),r=="dragstart"&&!h.cancelled&&d.update()}while(++c<v);return e.type=a.type,e.originalEvent=a.event,i.flatten(s.results)},properties:function(e,t,n){var r=n.callback;return r.drag=n.drag,r.proxy=n.proxy||n.drag,r.startX=t.pageX,r.startY=t.pageY,r.deltaX=e.pageX-t.pageX,r.deltaY=e.pageY-t.pageY,r.originalX=n.offset.left,r.originalY=n.offset.top,r.offsetX=r.originalX+r.deltaX,r.offsetY=r.originalY+r.deltaY,r.drop=i.flatten((n.drop||[]).slice()),r.available=i.flatten((n.droppable||[]).slice()),r},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(e){return t.map(e,function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?i.flatten(e):e})},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){r.drop&&this.available.length&&t.each(this.available,function(e){r.drop.locate(this,e)})}};var s=n.dispatch;n.dispatch=function(e){if(t.data(this,"suppress."+e.type)-(new Date).getTime()>0){t.removeData(this,"suppress."+e.type);return}return s.apply(this,arguments)};var o=n.fixHooks.touchstart=n.fixHooks.touchmove=n.fixHooks.touchend=n.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&t.each(o.props,function(t,n){e[n]=r[n]})}return e}};r.draginit=r.dragstart=r.dragend=i}(e)}var ewrEmailDialog,ewrExportDialog,ewrPopups={},$rowindex$=null,ewrDrillCharts=[],ewrExporting=!1,ewrExportCharts=[],EWR_TABLE_CLASSNAME="ewTable",EWR_GRID_CLASSNAME="ewGrid",EWR_TABLE_ROW_CLASSNAME="ewTableRow",EWR_TABLE_ALT_ROW_CLASSNAME="ewTableAltRow",EWR_ITEM_TEMPLATE_CLASSNAME="ewTemplate",EWR_ITEM_TABLE_CLASSNAME="ewItemTable",EWR_TABLE_LAST_ROW_CLASSNAME="ewTableLastRow",EWR_TABLE_LAST_COL_CLASSNAME="ewTableLastCol",EWR_UNFORMAT_YEAR=50,EWR_POPUP_MINWIDTH=200,EWR_POPUP_MINHEIGHT=150,EWR_POPUP_DEFAULTHEIGHT=200,EWR_EMPTY_VALUE="##empty##",EWR_NULL_VALUE="##null##",ewr_ClientScriptInclude=jQuery.getScript,ewrForms={};jQuery(function(e){e("div.ewTableHeaderBtn").each(function(){var t=e(this),n=0;t.find(".ewTableHeaderSort .caret")[0]&&(n+=12),t.find(".ewTableHeaderPopup")[0]&&(n+=18),n&&t.css("padding-right",n)}),e("table."+EWR_TABLE_CLASSNAME).each(ewr_SetupTable),e("table."+EWR_GRID_CLASSNAME).each(ewr_SetupGrid),e.later(0,null,function(){var t=e(window),n=e("#ewContentTable").outerHeight();t.resize(function(){e("#ewContentTable").height(Math.max(n,t.height()-(e("#ewHeaderRow").is(":hidden")?0:e("#ewHeaderRow").height())-(e("#ewMenuRow").height()||0)-(e("#ewFooterRow").is(":hidden")?0:e("#ewFooterRow").height())))}).triggerHandler("resize")}),e("input[name=pageno]").keypress(function(e){if(e.which==13){var t=window.location.href,n=t.lastIndexOf(window.location.search);return window.location=t.substr(0,n)+"?"+this.name+"="+parseInt(this.value),!1}}),e("input[data-calendar]").each(ewr_CreateCalendar),e(window).keydown(function(e){window._ctrlKey=e.ctrlKey}).keyup(function(e){window._ctrlKey=0}),(typeof EW_USE_JAVASCRIPT_MESSAGE=="undefined"||!EW_USE_JAVASCRIPT_MESSAGE)&&EWR_USE_JAVASCRIPT_MESSAGE&&ewr_ShowMessage()});var ewrEvent={on:ewr_On},ewrForms=function(e){if(e){var t=jQuery,n;t.isString(e)?n=e:n=t(ewr_GetForm(e)).attr("id");if(n)for(var r in this)if(r===n)return this[r]}return undefined};ewr_Extend(jQuery);