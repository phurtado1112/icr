<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Rep_Estado_Campanias" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5fabfc19-a8bf-48da-b74a-a8cffac837d6">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Title" fontName="Times New Roman" fontSize="50" isBold="true" pdfFontName="Times-Bold"/>
	<style name="SubTitle" forecolor="#736343" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<style name="Row" mode="Transparent">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
			<style backcolor="#E6DAC3"/>
		</conditionalStyle>
	</style>
	<queryString language="SQL">
		<![CDATA[SELECT
        `asignar`.`idasignar` AS `idasignar`,
        `campanias`.`idcampania` AS `idcampania`,
        `campanias`.`campania` AS `campania`,
        `campanias`.`terminada` AS `terminada`,
        `campanias`.`fechainicio` AS `fechainicio`,
        `campanias`.`fechafin` AS `fechafin`,
        `programas`.`programa` AS `programa`,
        `usuarios`.`nombre` AS `nombre`,
        SUM(IF((`clientes`.`idestado` = '1'), 1, 0)) AS `ATENDIDO`,
        SUM(IF((`clientes`.`idestado` = '0'), 1, 0)) AS `PENDIENTE`,
        COUNT(0) AS `TOTAL`,
        ROUND(((SUM(IF((`clientes`.`idestado` = '1'), 1, 0)) * 100) / COUNT(0)),
                1) AS `PROCENT`,
        SUM(IF((`transaccion`.`idtipificacion` = 16),
            1,
            0)) AS `CALIFICADO`,
        SUM(IF((`transaccion`.`idtipificacion` = 9),
            1,
            0)) AS `NOINTERESADO`,
        (SUM(IF((`transaccion`.`idtipificacion` = 18),
            1,
            0)) + SUM(IF((`transaccion`.`idtipificacion` = 21),
            1,
            0))) AS `OTROPROGRAMA`,
        (SUM(IF((`transaccion`.`idtipificacion` = 17),
            1,
            0)) + SUM(IF((`transaccion`.`idtipificacion` = 10),
            1,
            0))) AS `FALLIDA`
    FROM
        (((((`asignar`
        LEFT JOIN `campanias` ON ((`asignar`.`idcampania` = `campanias`.`idcampania`)))
        LEFT JOIN `clientes` ON ((`asignar`.`idasignar` = `clientes`.`idasignar`)))
        LEFT JOIN `usuarios` ON ((`asignar`.`idusuario` = `usuarios`.`idusuario`)))
        LEFT JOIN `programas` ON ((`campanias`.`idprograma` = `programas`.`idprograma`)))
        LEFT JOIN `transaccion` ON ((`clientes`.`idcliente` = `transaccion`.`idcliente`)))
    WHERE
        (`transaccion`.`ultimo` = 1)
    GROUP BY `asignar`.`idasignar`]]>
	</queryString>
	<field name="nombre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="campania" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="programa" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ATENDIDO" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PENDIENTE" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="TOTAL" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="CALIFICADO" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="NOINTERESADO" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="OTROPROGRAMA" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="FALLIDA" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PROCENT" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="sumaAtendidos" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{ATENDIDO}]]></variableExpression>
	</variable>
	<variable name="sumaPendientes" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{PENDIENTE}]]></variableExpression>
	</variable>
	<variable name="sumaTotal" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{TOTAL}]]></variableExpression>
	</variable>
	<variable name="sumaCalificados" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{CALIFICADO}]]></variableExpression>
	</variable>
	<variable name="sumaNoInteresado" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{NOINTERESADO}]]></variableExpression>
	</variable>
	<variable name="otroPrograma" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{OTROPROGRAMA}]]></variableExpression>
	</variable>
	<variable name="sumaFallida" class="java.lang.Integer" resetType="Group" resetGroup="programa" calculation="Sum">
		<variableExpression><![CDATA[$F{FALLIDA}]]></variableExpression>
	</variable>
	<group name="programa">
		<groupExpression><![CDATA[$F{programa}]]></groupExpression>
		<groupHeader>
			<band height="27">
				<frame>
					<reportElement mode="Opaque" x="-21" y="2" width="773" height="24" forecolor="#B89F7D" backcolor="#F2EBDF" uuid="e2418769-997d-4941-a27e-059e823c8110"/>
				</frame>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="28"/>
		</groupFooter>
	</group>
	<group name="campania">
		<groupExpression><![CDATA[$F{campania}]]></groupExpression>
		<groupHeader>
			<band height="20"/>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="119" splitType="Stretch">
			<staticText>
				<reportElement style="Title" x="270" y="0" width="492" height="62" uuid="7f21fad9-0e52-4546-864d-201e969a9a4b"/>
				<textElement verticalAlignment="Middle">
					<font size="44" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Estado de CampaÃ±as]]></text>
			</staticText>
			<image>
				<reportElement x="1" y="0" width="266" height="84" uuid="00643715-2ca6-45bd-b5e3-26fddb620ae1"/>
				<imageExpression><![CDATA["C:\\xampp\\htdocs\\incaecrm\\administracion\\images\\incae_logo.jpg"]]></imageExpression>
			</image>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="16" splitType="Stretch">
			<line>
				<reportElement positionType="FixRelativeToBottom" x="0" y="15" width="802" height="1" uuid="583ca11a-a6a2-470e-9c86-08bf5e5b76f5"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement style="Column header" x="19" y="0" width="89" height="15" forecolor="#000066" uuid="5cf34042-1992-4e98-930a-c90fdf96b059"/>
				<textElement verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[ASESOR]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="108" y="0" width="89" height="15" forecolor="#000066" uuid="3f8e87e8-4d69-406d-88d8-6f0e5fbbffbd"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[ATENDIDOS]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="182" y="0" width="89" height="15" forecolor="#000066" uuid="9e2e4a31-acae-42d2-91fa-f92b417a16da"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[PENDIENTES]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="247" y="0" width="89" height="15" forecolor="#000066" uuid="dd4cf4a7-dd00-4ec8-818b-e3e7bf9469ba"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="318" y="0" width="89" height="15" forecolor="#000066" uuid="fbc47784-f94e-465e-84a9-6436679cac3d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[CALIFICADOS]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="509" y="0" width="111" height="15" forecolor="#000066" uuid="6ccff85a-57ce-4bc3-a7be-2abec5d0ee2a"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[OTRO PROGRAMA]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="607" y="1" width="89" height="15" forecolor="#000066" uuid="8f86b25f-7c37-4a43-b982-4813f334ce52"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[FALLIDAS]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="671" y="0" width="89" height="15" forecolor="#000066" uuid="5941b059-4df6-4ca8-bf18-279c05516375"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[% AVANCE]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="409" y="0" width="109" height="15" forecolor="#000066" uuid="91a9e6e9-765e-4880-9745-bb24ab09e402"/>
				<textElement verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[NO INTERESADOS]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<frame>
				<reportElement style="Row" mode="Opaque" x="0" y="0" width="752" height="15" uuid="0d0bcc79-70b9-493c-9f17-0e1cf8c149c3"/>
			</frame>
		</band>
	</detail>
	<columnFooter>
		<band height="6" splitType="Stretch">
			<line>
				<reportElement positionType="FixRelativeToBottom" x="0" y="2" width="752" height="1" uuid="a1e6c7ec-b4b3-47c1-b0bb-d71eb0e906c9"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
		</band>
	</columnFooter>
	<pageFooter>
		<band height="21" splitType="Stretch">
			<frame>
				<reportElement mode="Opaque" x="-21" y="-4" width="773" height="24" forecolor="#D0B48E" backcolor="#F2EBDF" uuid="6969d28c-f754-41fa-88c4-a6163962030b"/>
				<textField pattern="EEEEE dd MMMMM yyyy">
					<reportElement style="Column header" x="22" y="0" width="197" height="20" forecolor="#736343" uuid="dd1177ad-ad9d-44b6-8dfd-55aa6babd958"/>
					<textElement verticalAlignment="Middle">
						<font size="10" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
				</textField>
			</frame>
			<textField evaluationTime="Report">
				<reportElement style="Column header" x="680" y="0" width="40" height="20" forecolor="#736343" uuid="caf3c928-3dd8-42b1-99ce-43d182f15e39"/>
				<textElement verticalAlignment="Middle">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
